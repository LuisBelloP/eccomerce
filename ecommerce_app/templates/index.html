{% extends 'base.html' %}
{% block content%}
{% load cart %}
{% load custom_filter %}
<!--CardS-->
<div class="bg-black p-6 text-white text-center">
          <h1 class="mt-10 text-2xl roboto-slab text-bold  tracking-tight ">
            Envio gratis en todos los productos
          </h1>
</div>



<div id="default-carousel" class="relative w-full" data-carousel="slide">
  <!-- Carousel wrapper -->

  <div class="relative h-60 overflow-hidden  md:h-96">
       <!-- Item 1 -->
      <div class="hidden duration-700 ease-in-out  flex justify-center " data-carousel-item style="height: 100%;">
        <img src="../static/katecoach.png" class="absolute w-full h-full object-cover" alt="...">
        <h1 class="p-7 z-10 text-lg sm:text-2xl md:text-2xl lg:text-4xl xl:text-4xl roboto-slab font-bold tracking-tight text-black">
          <a href="#ofertas" class="scroll-smooth">
            Piezas Exclusivas
          </a>
        </h1>
        
      </div>
      <!-- Item 2 -->
      <div class="hidden duration-700 ease-in-out flex justify-center" data-carousel-item style="height: 100%;">
        <img src="../static/ks1bg.png" class="absolute w-full h-full object-cover" alt="..." >
        <h1 class="z-10 text-4xl roboto-slab font-bold tracking-tight text-black m-9"></h1>
      </div>
      <!-- Item 3 -->
      <div class="hidden duration-700 ease-in-out flex justify-center " data-carousel-item>
          <img src="https://images.pexels.com/photos/7135066/pexels-photo-7135066.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
          <h1 class="z-10 text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl roboto-slab font-bold tracking-tight text-black lg:mt-40 m-20 md:mt-40">
            <a href="#ofertas" class="scroll-smooth">
              Aceptamos pagos electrónicos en todos nuestros productos
            </a>
          </h1>
          
        </div>
      <!-- Item 4 -->
      <div class="hidden duration-700 ease-in-out flex justify-center" data-carousel-item style="height: 100%;">
        <img src="../static/n1.png" class="absolute w-full h-full object-cover" alt="..." >
        <h1 class="z-10 text-4xl roboto-slab font-bold tracking-tight text-black m-9"></h1>
      </div>
      <!-- Item 5 -->
      <div class="hidden duration-700 ease-in-out flex justify-center items-center" data-carousel-item>
        <h1 class="z-10 text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl roboto-slab font-bold tracking-tight text-black m-20">
          Envíos gratis en todas las compras dentro de la república Mexicana
        </h1>
        
        <img src="https://cms.coachoutlet.com/i/coachoutlet/20240215-m8-coachtopia-cherry-d.png" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="...">
      </div>
  </div>
  <!-- Slider indicators -->
  <div class="absolute z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3 rtl:space-x-reverse">
      <button type="button" class="w-3 h-3 rounded-full" aria-current="true" aria-label="Slide 1" data-carousel-slide-to="0"></button>
      <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 2" data-carousel-slide-to="1"></button>
      <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 3" data-carousel-slide-to="2"></button>
      <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 4" data-carousel-slide-to="3"></button>
      <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 5" data-carousel-slide-to="4"></button>
      
  </div>
  <!-- Slider controls -->
  <button type="button" class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-prev>
      <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-black/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
          <svg class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4"/>
          </svg>
          <span class="sr-only">Previous</span>
      </span>
  </button>
  <button type="button" class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-next>
      <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-black/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
          <svg class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
          </svg>
          <span class="sr-only">Next</span>
      </span>
  </button>

  <script src="https://unpkg.com/flowbite@1.4.0/dist/flowbite.js"></script>
</div>


<!--Index Products-->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 m-2">
  {%with products_count=products_to_post|length%}
  
  {% if products_count > 5  %}
    
    {% for x in products_to_post  %}
      {%if forloop.counter <= 11 %}
<div class="max-w-sm mx-auto ">
  <div class="bg-white shadow-sm rounded-lg">
    <div class="h-60 w-full flex justify-center items-center  overflow-hidden rounded-lg">
      <a href="/{{x.id}}">
       <!--Image-->
  
        <img
        class="h-full w-auto object-cover p-10 rounded-lg md:h-48 md:w-48 md:p-0  "
        src={{x.image}} 
        alt="product image"
      />
       
      
    </a>
    </div>
    
    <div class="px-5 pb-5">
      <a href="/{{x.id}}">
        <!--Name-->
        <h3 class="roboto-slab text-gray-900  text-xl tracking-tight dark:text-gray-900">
        {{x.name}}
        </h3>
      </a>
       
      <div class="flex items-center mt-2.5 mb-5">
        <svg
          class="w-5 h-5 text-yellow-300"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
          ></path>
        </svg>
        <svg
          class="w-5 h-5 text-yellow-300"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
          ></path>
        </svg>
        <svg
          class="w-5 h-5 text-yellow-300"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
          ></path>
        </svg>
        <svg
          class="w-5 h-5 text-yellow-300"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
          ></path>
        </svg>
        <svg
          class="w-5 h-5 text-yellow-300"
          fill="currentColor"
          viewBox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
          ></path>
        </svg>
        <span
          class="arvo-regular bg-gray-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-blue-800 ml-3"
          >5.0</span
        >
        {% if x.quantity > 0%}
        <span
          class="arvo-regular bg-gray-100 text-blue-800 text-s font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-blue-800 ml-3"
          >{{x.quantity}}  Disponibles</span
        >
        {% else %}
        <span
          class="arvo-regular bg-red-100 text-red-800 text-s font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-red-200 dark:text-red-800 ml-3"
          >No disponible</span
        >
        {% endif %}
      </div>
      <div class="flex items-center justify-between">
         <!--Price-->
        <span class="text-3xl arvo-regular text-gray-900 dark:text-gray-900"
          >${{x.price}}mx</span
        >
        {% comment %}
          function to add cardd ####################################################
        {% endcomment %}

        {% if x|is_in_cart:request.session.cart %}
            <div class="flex items-center justify-center space-x-2">
                <form action="/#{{x.id}}" class="col-2" method="post">
                    {% csrf_token %}
                    <input hidden type="text" name="product"  value='{{x.id}}' >
                    <input hidden type="text" name="remove" value="True" >
                    <input type="submit" value="-" class="arvo-regular float-right float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800 border-right">
                </form>
                
                    <div class="text-center text-black arvo-regular">{{x|cart_quantity:request.session.cart}}</div>
                
                <form action="/#{{x.id}}" class="col-2 " method="post">
                    {% csrf_token %}
                    <input hidden type="text" name='product' value='{{x.id}}'>
                    <input type="submit" value=" + " class="arvo-regular float-right float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800 border-left">
                </form>
            </div>
        {% else %}
        <form action="/#{{x.id}}"  method="POST" class="btn-block ">
                       {% csrf_token %}
                        <input hidden type="text" name='product' value='{{x.id}}'>
                        <input type="submit" class=" arvo-regular float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800"
                          value="Agregar">
        </form>
        {% endif %}
        {% comment %} <a href="/{{x.id}}" class="arvo-regular float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800">
          Ver</a> {% endcomment %}
      </div>
    </div>
  </div>
</div>
    {% endif %}
  {%endfor%}
{% else %}

  
  {% for x in products_to_post  %}
  div>
  <h2>{{ x.name }}</h2>
  <p>{{ x.description }}</p>
  {# etc... #}
  </div>
    {% endfor %}
  {% endif %}
{% endwith %}
    

</div>
<section id='ofertas'>
  <div  class="bg-black p-5 text-white text-center">
  <h1 class=" text-3xl roboto-slab text-bold  tracking-tight ">
    Únicas Piezas
  </h1>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 m-2">
  {% with products_count=products_to_post|length %}
  {% if products_count > 2 %}
    {% for x in products_to_post %}
      {% if forloop.revcounter <= 9 %}
        {# Renderiza la información del producto aquí #}
        <div class="max-w-2xl mx-auto">
          <div class="bg-white shadow-sm rounded-lg">
            <div class="h-60 w-full flex justify-center items-center  overflow-hidden rounded-lg">

              <a href="/{{x.id}}">
               <!--Image-->
              <img
                class="h-full w-auto object-cover p-10 rounded-lg md:h-48 md:w-48 md:p-0  "
                src={{x.image}} 
                alt="product image"
              />
            </a>
            </div>
            
            <div class="px-5 pb-5">
              <a href="/{{x.id}}">
                <!--Name-->
                <h3 class="roboto-slab text-gray-900  text-xl tracking-tight dark:text-gray-900">
                {{x.name}}
                </h3>
              </a>
               
              <div class="flex items-center mt-2.5 mb-5">
                <svg
                  class="w-5 h-5 text-yellow-300"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                  ></path>
                </svg>
                <svg
                  class="w-5 h-5 text-yellow-300"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                  ></path>
                </svg>
                <svg
                  class="w-5 h-5 text-yellow-300"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                  ></path>
                </svg>
                <svg
                  class="w-5 h-5 text-yellow-300"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                  ></path>
                </svg>
                <svg
                  class="w-5 h-5 text-yellow-300"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                  ></path>
                </svg>
                <span
                  class="arvo-regular bg-gray-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-blue-800 ml-3"
                  >5.0</span
                >
                {% if x.quantity > 0%}
                <span
                  class="arvo-regular bg-gray-100 text-blue-800 text-s font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-blue-800 ml-3"
                  >{{x.quantity}}  Disponibles</span
                >
                {% else %}
                <span
                  class="arvo-regular bg-red-100 text-red-800 text-s font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-red-200 dark:text-red-800 ml-3"
                  >No disponible</span
                >
                {% endif %}
              </div>
              <div class="flex items-center justify-between">
                 <!--Price-->
                <span class="text-3xl arvo-regular text-gray-900 dark:text-gray-900"
                  >${{x.price}}mx</span
                >
                {% comment %}
                  function to add cardd ####################################################
                {% endcomment %}
        
                {% if x|is_in_cart:request.session.cart %}
                    <div class="flex items-center justify-center space-x-2">
                        <form action="/#{{x.id}}" class="col-2" method="post">
                            {% csrf_token %}
                            <input hidden type="text" name="product"  value='{{x.id}}' >
                            <input hidden type="text" name="remove" value="True" >
                            <input type="submit" value="-" class="arvo-regular float-right float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800 border-right">
                        </form>
                        
                            <div class="text-center text-black arvo-regular">{{x|cart_quantity:request.session.cart}}</div>
                        
                        <form action="/#{{x.id}}" class="col-2 " method="post">
                            {% csrf_token %}
                            <input hidden type="text" name='product' value='{{x.id}}'>
                            <input type="submit" value=" + " class="arvo-regular float-right float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800 border-left">
                        </form>
                    </div>
                {% else %}
                <form action="/#{{x.id}}"  method="POST" class="btn-block ">
                               {% csrf_token %}
                                <input hidden type="text" name='product' value='{{x.id}}'>
                                <input type="submit" class=" arvo-regular float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800"
                                  value="Agregar">
                </form>
                {% endif %}
                {% comment %} <a href="/{{x.id}}" class="arvo-regular float-right btn btn-success form-control text-white bg-black hover:bg-black-800 focus:ring-4 focus:ring-black-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-black-600 dark:hover:bg-black-700 dark:focus:ring-black-800">
                  Ver</a> {% endcomment %}
              </div>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  {% else %}
    {# Si hay 2 o menos productos, simplemente renderízalos todos #}
    {% for x in products_to_post %}
      <div>
        <h2>{{ x.name }}</h2>
        <p>{{ x.description }}</p>
        {# etc... #}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}
</div>



        

</section>

{% endblock %}